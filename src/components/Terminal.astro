---
import "@xterm/xterm/css/xterm.css";
---

<div>
  <div id="terminal"></div>
  <script>
    import { Terminal } from "@xterm/xterm";

    const term = new Terminal({ cols: 80, rows: 24 });
    term.open(document.getElementById("terminal")!);
    term.write("Hello from \x1B[1;3;31mxterm.js\x1B[0m $ ");

    let lineBuffer = "";
    term.onKey((e) => {
      const ENTER = "\r";
      const BACKSPACE = "\x7F";

      console.log(e.key);
      term.write(e.key);
      if (e.key == ENTER) term.write("\n");
      else if (e.key === BACKSPACE && lineBuffer.length > 0) {
        term.write("\b");
        lineBuffer = lineBuffer.slice(0, -1);
      } else {
        lineBuffer += e.key;
      }
    });
  </script>
</div>
